(window.webpackJsonp=window.webpackJsonp||[]).push([[260],{759:function(s,a,t){"use strict";t.r(a);var e=t(17),n=Object(e.a)({},(function(){var s=this,a=s.$createElement,t=s._self._c||a;return t("ContentSlotsDistributor",{attrs:{"slot-key":s.$parent.slotKey}},[t("h1",{attrs:{id:"elasticsearch安装"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#elasticsearch安装"}},[s._v("#")]),s._v(" ElasticSearch安装")]),s._v(" "),t("h2",{attrs:{id:"相关文档介绍"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#相关文档介绍"}},[s._v("#")]),s._v(" 相关文档介绍")]),s._v(" "),t("div",{staticClass:"cardListContainer"},[t("div",{staticClass:"card-list"},[t("a",{staticClass:"card-item row-3",staticStyle:{"--randomColor":"var(--bodyBg)"},attrs:{href:"https://www.cnblogs.com/zhiqiangzhang/p/11425473.html",target:"_blank"}},[t("div",[t("p",{staticClass:"name"},[s._v("ES常用配置")]),s._v(" "),t("p",{staticClass:"desc"},[s._v("Elasticsearch 常用配置参数总结")])])]),s._v(" "),t("a",{staticClass:"card-item row-3",staticStyle:{"--randomColor":"var(--bodyBg)"},attrs:{href:"https://www.elastic.co/guide/cn/elasticsearch/guide/current/getting-started.html",target:"_blank"}},[t("img",{staticClass:"no-zoom",attrs:{src:"https://images.contentstack.io/v3/assets/bltefdd0b53724fa2ce/blt280217a63b82a734/5bbdaacf63ed239936a7dd56/elastic-logo.svg"}}),s._v(" "),t("div",[t("p",{staticClass:"name"},[s._v("Elasticsearch 官网")]),s._v(" "),t("p",{staticClass:"desc"},[s._v("一个实时分布式搜索分析引擎")])])]),s._v(" "),t("a",{staticClass:"card-item row-3",staticStyle:{"--randomColor":"var(--bodyBg)"},attrs:{href:"https://github.com/qax-os/ElasticHD/releases",target:"_blank"}},[t("div",[t("p",{staticClass:"name"},[s._v("ElasticHD 源码")]),s._v(" "),t("p",{staticClass:"desc"},[s._v(" Elasticsearch 界面软件")])])])]),t("div",{staticClass:"language-yaml line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-yaml"}},[t("code",[t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("-")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("name")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v(" ES常用配置\n  "),t("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("desc")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v("'Elasticsearch 常用配置参数总结'")]),s._v("\n  "),t("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("link")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v(" https"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v("//www.cnblogs.com/zhiqiangzhang/p/11425473.html  "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 可选")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("-")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("name")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v(" Elasticsearch 官网\n  "),t("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("desc")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v("'一个实时分布式搜索分析引擎'")]),s._v("\n  "),t("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("avatar")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v("  https"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v("//images.contentstack.io/v3/assets/bltefdd0b53724fa2ce/blt280217a63b82a734/5bbdaacf63ed239936a7dd56/elastic"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("-")]),s._v("logo.svg    "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 可选")]),s._v("\n  "),t("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("link")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v(" https"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v("//www.elastic.co/guide/cn/elasticsearch/guide/current/getting"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("-")]),s._v("started.html "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 可选  ")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("-")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("name")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v(" ElasticHD 源码\n  "),t("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("desc")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('" Elasticsearch 界面软件"')]),s._v("\n  "),t("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("link")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v(" https"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v("//github.com/qax"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("-")]),s._v("os/ElasticHD/releases   "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 可选 ")]),s._v("\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br"),t("span",{staticClass:"line-number"},[s._v("4")]),t("br"),t("span",{staticClass:"line-number"},[s._v("5")]),t("br"),t("span",{staticClass:"line-number"},[s._v("6")]),t("br"),t("span",{staticClass:"line-number"},[s._v("7")]),t("br"),t("span",{staticClass:"line-number"},[s._v("8")]),t("br"),t("span",{staticClass:"line-number"},[s._v("9")]),t("br"),t("span",{staticClass:"line-number"},[s._v("10")]),t("br")])])]),t("h2",{attrs:{id:"简介"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#简介"}},[s._v("#")]),s._v(" 简介")]),s._v(" "),t("blockquote",[t("p",[s._v("Elasticsearch是一个基于Apache Lucene(TM)的开源搜索引擎，无论在开源还是专有领域，Lucene可以被认为是迄今为止最先进、性能最好的、功能最全的搜索引擎库。\n但是，Lucene只是一个库。想要发挥其强大的作用，你需使用Java并要将其集成到你的应用中。Lucene非常复杂，你需要深入的了解检索相关知识来理解它是如何工作的。\nElasticsearch也是使用Java编写并使用Lucene来建立索引并实现搜索功能，但是它的目的是通过简单连贯的RESTful API让全文搜索变得简单并隐藏Lucene的复杂性。\n不过，Elasticsearch不仅仅是Lucene和全文搜索引擎，它还提供：")]),s._v(" "),t("ul",[t("li",[s._v("分布式的实时文件存储，每个字段都被索引并可被搜索")]),s._v(" "),t("li",[s._v("实时分析的分布式搜索引擎")]),s._v(" "),t("li",[s._v("可以扩展到上百台服务器，处理PB级结构化或非结构化数据")])]),s._v(" "),t("p",[s._v("而且，所有的这些功能被集成到一台服务器，你的应用可以通过简单的RESTful API、各种语言的客户端甚至命令行与之交互。上手Elasticsearch非常简单，它提供了许多合理的缺省值，并对初学者隐藏了复杂的搜索引擎理论。它开箱即用（安装即可使用），只需很少的学习既可在生产环境中使用。Elasticsearch在Apache 2 license下许可使用，可以免费下载、使用和修改。\n随着知识的积累，你可以根据不同的问题领域定制Elasticsearch的高级特性，这一切都是可配置的，并且配置非常灵活。")])]),s._v(" "),t("h2",{attrs:{id:"docker-安装-es"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#docker-安装-es"}},[s._v("#")]),s._v(" docker 安装 ES")]),s._v(" "),t("h3",{attrs:{id:"_1-设置max-map-count-非必要"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_1-设置max-map-count-非必要"}},[s._v("#")]),s._v(" 1.设置max_map_count (非必要)")]),s._v(" "),t("p",[s._v("不能启动es会启动不起来(修改VMA(虚拟内存区域)的数量)")]),s._v(" "),t("blockquote",[t("p",[s._v("***max_map_count***文件包含限制一个进程可以拥有的VMA(虚拟内存区域)的数量。虚拟内存区域是一个连续的虚拟地址空间区域。在进程的生命周期中，每当程序尝试在内存中映射文件，链接到共享内存段，或者分配堆空间的时候，这些区域将被创建。调优这个值将限制进程可拥有VMA的数量。限制一个进程拥有VMA的总数可能导致应用程序出错，因为当进程达到了VMA上线但又只能释放少量的内存给其他的内核进程使用时，操作系统会抛出内存不足的错误。如果你的操作系统在NORMAL区域仅占用少量的内存，那么调低这个值可以帮助释放内存给内核用。")])]),s._v(" "),t("p",[s._v("查看max_map_count的值 默认是65530")]),s._v(" "),t("div",{staticClass:"language-shell line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-shell"}},[t("code",[t("span",{pre:!0,attrs:{class:"token function"}},[s._v("cat")]),s._v(" /proc/sys/vm/max_map_count\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#或")]),s._v("\nsysctl -a"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("grep")]),s._v(" vm.max_map_count\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br")])]),t("p",[s._v("重新设置max_map_count的值")]),s._v(" "),t("div",{staticClass:"language-shell line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-shell"}},[t("code",[s._v("sysctl -w vm.max_map_count"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("262144")]),s._v("\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br")])]),t("h3",{attrs:{id:"_2-拉取镜像"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_2-拉取镜像"}},[s._v("#")]),s._v(" 2.拉取镜像")]),s._v(" "),t("div",{staticClass:"language-shell line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-shell"}},[t("code",[t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#拉取镜像")]),s._v("\ndocker pull elasticsearch:7.7.0\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br")])]),t("h3",{attrs:{id:"_3-运行"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_3-运行"}},[s._v("#")]),s._v(" 3.运行")]),s._v(" "),t("div",{staticClass:"language-shell line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-shell"}},[t("code",[s._v("docker run\n--name es       "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#命名容器名")]),s._v("\n-e "),t("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("ES_JAVA_OPTS")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"-Xms512m -Xmx512m"')]),s._v("  "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#设置环境变量   设置最大占用内存")]),s._v("\n-e "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"discovery.type=single-node"')]),s._v("                 "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#部署为单点 非集群")]),s._v("\n-p "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("9200")]),s._v(":9200                                             "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#映射端口        ")]),s._v("\n-p "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("9300")]),s._v(":9300 \n-d                                                          "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 后台运行容器，并返回容器ID；")]),s._v("\nelasticsearch:7.7.0                               "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#使用的镜像 ")]),s._v("\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br"),t("span",{staticClass:"line-number"},[s._v("4")]),t("br"),t("span",{staticClass:"line-number"},[s._v("5")]),t("br"),t("span",{staticClass:"line-number"},[s._v("6")]),t("br"),t("span",{staticClass:"line-number"},[s._v("7")]),t("br"),t("span",{staticClass:"line-number"},[s._v("8")]),t("br")])]),t("blockquote",[t("p",[s._v("9200 用于外部通讯，基于http协议，程序与es的通信使用9200端口。 (ES节点之间的通讯使用)")]),s._v(" "),t("p",[s._v("9300  jar之间就是通过tcp协议通信，遵循tcp协议，es集群中的节点之间也通过9300端口进行通信。 (ES节点之间的通讯使用)")]),s._v(" "),t("p",[s._v("--name表示镜像启动后的容器名称")]),s._v(" "),t("p",[s._v("-d: 后台运行容器，并返回容器ID；")]),s._v(" "),t("p",[s._v("-e: 指定容器内的环境变量")]),s._v(" "),t("p",[s._v("-p: 指定端口映射，格式为：主机(宿主)端口:容器端口")])]),s._v(" "),t("div",{staticClass:"language-shell line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-shell"}},[t("code",[s._v("docker run --name es -d -e "),t("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("ES_JAVA_OPTS")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"-Xms512m -Xmx512m"')]),s._v(" -e "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"discovery.type=single-node"')]),s._v(" -p "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("9200")]),s._v(":9200 -p "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("9300")]),s._v(":9300 elasticsearch:7.7.0\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br")])]),t("h3",{attrs:{id:"_4-运行成功-查看-ip-9200"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_4-运行成功-查看-ip-9200"}},[s._v("#")]),s._v(" 4.运行成功 查看 "),t("code",[s._v("ip:9200")])]),s._v(" "),t("p",[t("img",{attrs:{src:"http://img.alicbin.com/img/20220106133057.png",alt:"image-20220106133057339"}})]),s._v(" "),t("h3",{attrs:{id:"_5-修改配置文件-非必要"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_5-修改配置文件-非必要"}},[s._v("#")]),s._v(" 5.修改配置文件("),t("code",[s._v("非必要")]),s._v(")")]),s._v(" "),t("div",{staticClass:"language-shell line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-shell"}},[t("code",[t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 进入容器  es(刚才创建的容器名) 也是使用容器id")]),s._v("\ndocker "),t("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("exec")]),s._v(" -it es  /bin/bash \n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 编辑文件")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("vi")]),s._v(" config/elasticsearch.yml\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br"),t("span",{staticClass:"line-number"},[s._v("4")]),t("br")])]),t("h4",{attrs:{id:"尝试连接easticsearch会发现无法连接上-需要服务端做cors的配置"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#尝试连接easticsearch会发现无法连接上-需要服务端做cors的配置"}},[s._v("#")]),s._v(" 尝试连接easticsearch会发现无法连接上  需要服务端做CORS的配置")]),s._v(" "),t("p",[s._v("elasticsearch.yml 追加以下 配置并重启容器")]),s._v(" "),t("div",{staticClass:"language-yml line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-yml"}},[t("code",[t("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("http.cors.enabled")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token boolean important"}},[s._v("true")]),s._v(" \n"),t("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("http.cors.allow-origin")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"*"')]),s._v("\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br")])]),t("h4",{attrs:{id:"注意-本地只能通过http-ip-9200来访问了。"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#注意-本地只能通过http-ip-9200来访问了。"}},[s._v("#")]),s._v(" "),t("code",[s._v("注意")]),s._v(" 本地只能通过http://ip:9200来访问了。")]),s._v(" "),t("h2",{attrs:{id:"docker-elastichd-安装"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#docker-elastichd-安装"}},[s._v("#")]),s._v(" docker ElasticHD 安装")]),s._v(" "),t("blockquote",[t("p",[s._v("ElasticHD 支持 ES监控、实时搜索，Index template快捷替换修改，索引列表信息查看， SQL converts to DSL工具等，体验下来感觉还是比较强大的！")])]),s._v(" "),t("h3",{attrs:{id:"拉取和运行"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#拉取和运行"}},[s._v("#")]),s._v(" 拉取和运行")]),s._v(" "),t("div",{staticClass:"language-shell line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-shell"}},[t("code",[t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#拉取镜像")]),s._v("\ndocker pull  containerize/elastichd\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 运行容器")]),s._v("\ndocker  run  --name  es_hd   -p "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("9800")]),s._v(":9800 -d   containerize/elastichd\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br"),t("span",{staticClass:"line-number"},[s._v("4")]),t("br")])]),t("h3",{attrs:{id:"查看ip-9800"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#查看ip-9800"}},[s._v("#")]),s._v(" 查看ip:9800")]),s._v(" "),t("p",[s._v("​\t"),t("img",{attrs:{src:"http://img.alicbin.com/img/20220106143936.png",alt:"image-20220106143936089"}})]),s._v(" "),t("p",[t("code",[s._v("注意")]),s._v(" ElasticHD  连接本地 es 要填  局域网ip")])])}),[],!1,null,null,null);a.default=n.exports}}]);