(window.webpackJsonp=window.webpackJsonp||[]).push([[18],{518:function(s,a,t){"use strict";t.r(a);var n=t(17),e=Object(n.a)({},(function(){var s=this,a=s.$createElement,t=s._self._c||a;return t("ContentSlotsDistributor",{attrs:{"slot-key":s.$parent.slotKey}},[t("h2",{attrs:{id:"心跳空间-app"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#心跳空间-app"}},[s._v("#")]),s._v(" 心跳空间 APP")]),s._v(" "),t("h4",{attrs:{id:"_1、-部署路径相关-路径和简介"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_1、-部署路径相关-路径和简介"}},[s._v("#")]),s._v(" 1、 部署路径相关 路径和简介")]),s._v(" "),t("blockquote",[t("p",[s._v("部署服务器:  "),t("strong",[s._v("心跳客户的服务器")]),s._v("\n服务器域名:  www.xintiaokongjian.com\nIP:  47.107.111.190\n项目所在路径 ： /home/java/heart_api"),t("br"),s._v("\n./api   后台接口服务\n./page  所 h5 页面\n./certs ssl 证书\nnginx 配置文件： /www/server/panel/vhost/nginx/  （详情请看下面）")]),s._v(" "),t("p",[s._v("官网页面路径 /www/wwwroot/www.xintiaokongjian.com")])]),s._v(" "),t("h4",{attrs:{id:"_2、创建-docker-容器-跑-后台-api-服务"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_2、创建-docker-容器-跑-后台-api-服务"}},[s._v("#")]),s._v(" 2、创建 docker 容器 跑 后台 api 服务")]),s._v(" "),t("h6",{attrs:{id:"_1、设计容器的端口-和-容器名-挂载点等的信息"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_1、设计容器的端口-和-容器名-挂载点等的信息"}},[s._v("#")]),s._v(" 1、设计容器的端口  和 容器名 挂载点等的信息")]),s._v(" "),t("div",{staticClass:"language-code line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[s._v("\t2.tomcat 容器创建   接口服务器\n\t容器名 my_api --name heart_api\n\t容器一直启动  --restart always\n\t端口 18082:8080/tcp \t(注意记得 开启该端口的 安全组或防火墙)\t         \n\t挂载点\n\t\t/home/java/heart_api/api:/usr/local/tomcat/webapps/api  \n\t\t/home/java/heart_api/conf:/usr/local/tomcat/conf\n\t\t/home/java/heart_api/logs/tomcat:/usr/local/tomcat/logs \n\t\t/home/java/heart_api/app_logs:/opt/logs/app_logs\t\n         /etc/localtime:/etc/localtime    #同步容器 容器时间 和主机时间 \n\t使用镜像\n\t\ttomcat:8.5.12-jre8  (自行 先拉取镜像  docker pull tomcat:8.5.12-jre8  ) \n\t命令： catalina.sh run\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br"),t("span",{staticClass:"line-number"},[s._v("4")]),t("br"),t("span",{staticClass:"line-number"},[s._v("5")]),t("br"),t("span",{staticClass:"line-number"},[s._v("6")]),t("br"),t("span",{staticClass:"line-number"},[s._v("7")]),t("br"),t("span",{staticClass:"line-number"},[s._v("8")]),t("br"),t("span",{staticClass:"line-number"},[s._v("9")]),t("br"),t("span",{staticClass:"line-number"},[s._v("10")]),t("br"),t("span",{staticClass:"line-number"},[s._v("11")]),t("br"),t("span",{staticClass:"line-number"},[s._v("12")]),t("br"),t("span",{staticClass:"line-number"},[s._v("13")]),t("br")])]),t("h6",{attrs:{id:"_2、在服务器终端执行命令"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_2、在服务器终端执行命令"}},[s._v("#")]),s._v(" 2、在服务器终端执行命令")]),s._v(" "),t("p",[s._v("​    如下:这因为有换行所以 "),t("strong",[s._v("不可以直接运行")])]),s._v(" "),t("div",{staticClass:"language-shell line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-shell"}},[t("code",[s._v("\tdocker run \n\t--restart always\n    --name heart_api\n    -p "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("18082")]),s._v(":8080/tcp \n    -v /home/java/heart_api/api:/usr/local/tomcat/webapps/api\n    -v /home/java/heart_api/conf/:/usr/local/tomcat/conf/\n    -v /home/java/heart_api/logs/tomcat:/usr/local/tomcat/logs \n    -v /home/java/heart_api/app_logs:/opt/logs/app_logs \n    -v /etc/localtime:/etc/localtime    \n    -it\n    -d tomcat:8.5.12-jre8 catalina.sh run\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br"),t("span",{staticClass:"line-number"},[s._v("4")]),t("br"),t("span",{staticClass:"line-number"},[s._v("5")]),t("br"),t("span",{staticClass:"line-number"},[s._v("6")]),t("br"),t("span",{staticClass:"line-number"},[s._v("7")]),t("br"),t("span",{staticClass:"line-number"},[s._v("8")]),t("br"),t("span",{staticClass:"line-number"},[s._v("9")]),t("br"),t("span",{staticClass:"line-number"},[s._v("10")]),t("br"),t("span",{staticClass:"line-number"},[s._v("11")]),t("br")])]),t("p",[s._v("​\t 直接运行 去掉换行  可以直接运行")]),s._v(" "),t("div",{staticClass:"language-shell line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-shell"}},[t("code",[s._v("\tdocker run --restart always --name heart_api -p "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("18082")]),s._v(":8080/tcp -v /home/java/heart_api/api:/usr/local/tomcat/webapps/api -v /home/java/heart_api/conf/:/usr/local/tomcat/conf/ -v /home/java/heart_api/logs/tomcat:/usr/local/tomcat/logs -v /home/java/heart_api/app_logs:/opt/logs/app_logs -v /etc/localtime:/etc/localtime  -it -d tomcat:8.5.12-jre8 catalina.sh run\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br")])]),t("p",[s._v("创建成功会返回  容器 id")]),s._v(" "),t("h6",{attrs:{id:"_3-查看是否创建成功"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_3-查看是否创建成功"}},[s._v("#")]),s._v(" 3.查看是否创建成功")]),s._v(" "),t("div",{staticClass:"language-shell line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-shell"}},[t("code",[s._v("docker "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("ps")]),s._v("  \n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br")])]),t("p",[s._v("显示列表中有 刚才创建的 容器名列表 则创建创建 ok")]),s._v(" "),t("h4",{attrs:{id:"_3、nginx-相关配置-www-xintiaokongjian-com-conf"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_3、nginx-相关配置-www-xintiaokongjian-com-conf"}},[s._v("#")]),s._v(" 3、nginx 相关配置  www.xintiaokongjian.com.conf")]),s._v(" "),t("div",{staticClass:"language-nginx line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-nginx"}},[t("code",[s._v("\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#上游服务器 用来跳转")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token directive"}},[t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("upstream")]),s._v(" www.xintiaokongjian.com")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n    "),t("span",{pre:!0,attrs:{class:"token directive"}},[t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("server")]),s._v("  www.xintiaokongjian.com:18082")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n\n\n"),t("span",{pre:!0,attrs:{class:"token directive"}},[t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("server")])]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n    "),t("span",{pre:!0,attrs:{class:"token directive"}},[t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("listen")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("80")])]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n    "),t("span",{pre:!0,attrs:{class:"token directive"}},[t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("server_name")]),s._v(" www.xintiaokongjian.com")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n    "),t("span",{pre:!0,attrs:{class:"token directive"}},[t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("index")]),s._v(" index.php index.html index.htm default.php default.htm default.html")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n    "),t("span",{pre:!0,attrs:{class:"token directive"}},[t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("root")]),s._v(" /www/wwwroot/www.xintiaokongjian.com")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("    "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#官网路径")]),s._v("\n    \n    "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#SSL-START SSL相关配置，请勿删除或修改下一行带注释的404规则")]),s._v("\n    "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#error_page 404/404.html;")]),s._v("\n    "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#SSL-END")]),s._v("\n    \n    "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#ERROR-PAGE-START  错误页配置，可以注释、删除或修改")]),s._v("\n    "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#error_page 404 /404.html;")]),s._v("\n    "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#error_page 502 /502.html;")]),s._v("\n    "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#ERROR-PAGE-END")]),s._v("\n    \n    "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#PHP-INFO-START  PHP引用配置，可以注释或修改")]),s._v("\n    "),t("span",{pre:!0,attrs:{class:"token directive"}},[t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("include")]),s._v(" enable-php-00.conf")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n    "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#PHP-INFO-END")]),s._v("\n    \n    "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#REWRITE-START URL重写规则引用,修改后将导致面板设置的伪静态规则失效")]),s._v("\n    "),t("span",{pre:!0,attrs:{class:"token directive"}},[t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("include")]),s._v(" /www/server/panel/vhost/rewrite/www.xintiaokongjian.com.conf")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n    "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#REWRITE-END")]),s._v("\n    \n    "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#管理后台 路径")]),s._v("\n       "),t("span",{pre:!0,attrs:{class:"token directive"}},[t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("location")]),s._v(" /heart")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n          "),t("span",{pre:!0,attrs:{class:"token directive"}},[t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("index")]),s._v(" index.php index.html index.htm default.php default.htm default.html")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n    "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n    "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#后端接口 ")]),s._v("\n    "),t("span",{pre:!0,attrs:{class:"token directive"}},[t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("location")]),s._v(" /api")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v(" \n        \n        "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#内网透传")]),s._v("\n        "),t("span",{pre:!0,attrs:{class:"token directive"}},[t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("proxy_pass")]),s._v(" http://127.0.0.1:10002")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 转发到我们在frps.ini中设置的vhost_http_port端口")]),s._v("\n        "),t("span",{pre:!0,attrs:{class:"token directive"}},[t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("proxy_set_header")]),s._v("    Host   "),t("span",{pre:!0,attrs:{class:"token variable"}},[s._v("$host")]),s._v(":80")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("  "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#不添加这行时访问需要 域名:7001才能访问到内网的机器，如果加了就不再需要后面的端口，直接使用域名访问")]),s._v("\n        "),t("span",{pre:!0,attrs:{class:"token directive"}},[t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("proxy_set_header")]),s._v("    X-Real-IP       "),t("span",{pre:!0,attrs:{class:"token variable"}},[s._v("$remote_addr")])]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n        "),t("span",{pre:!0,attrs:{class:"token directive"}},[t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("proxy_set_header")]),s._v("    X-Forwarded-For "),t("span",{pre:!0,attrs:{class:"token variable"}},[s._v("$proxy_add_x_forwarded_for")])]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n        "),t("span",{pre:!0,attrs:{class:"token directive"}},[t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("proxy_hide_header")]),s._v("   X-Powered-By")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n        \n        "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# #服务器接口")]),s._v("\n        "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# proxy_pass    http://www.xintiaokongjian.com;  #直接")]),s._v("\n        "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# proxy_set_header   Cookie $http_cookie;")]),s._v("\n        "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# # proxy_set_header X-Real-IP $remote_addr;")]),s._v("\n        "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# proxy_set_header Host $proxy_host;")]),s._v("\n    "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n    \n    \n    "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#禁止访问的文件或目录")]),s._v("\n    "),t("span",{pre:!0,attrs:{class:"token directive"}},[t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("location")]),s._v(" ~ ^/(\\.user.ini|\\.htaccess|\\.git|\\.svn|\\.project|LICENSE|README.md)")]),s._v("\n    "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n        "),t("span",{pre:!0,attrs:{class:"token directive"}},[t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("return")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("404")])]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n    "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n    \n    "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# #一键申请SSL证书验证目录相关设置")]),s._v("\n    "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# location ~ \\.well-known{")]),s._v("\n    "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#     allow all;")]),s._v("\n    "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# }")]),s._v("\n    \n    "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# location ~ .*\\.(gif|jpg|jpeg|png|bmp|swf)$")]),s._v("\n    "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# {")]),s._v("\n    "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#     expires      30d;")]),s._v("\n    "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#     error_log /dev/null;")]),s._v("\n    "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#     access_log off;")]),s._v("\n    "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# }")]),s._v("\n    \n    "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# location ~ .*\\.(js|css)?$")]),s._v("\n    "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# {")]),s._v("\n    "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#     expires      12h;")]),s._v("\n    "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#     error_log /dev/null;")]),s._v("\n    "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#     access_log off; ")]),s._v("\n    "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# }")]),s._v("\n    "),t("span",{pre:!0,attrs:{class:"token directive"}},[t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("access_log")]),s._v("  /www/wwwlogs/www.xintiaokongjian.com.log")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n    "),t("span",{pre:!0,attrs:{class:"token directive"}},[t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("error_log")]),s._v("  /www/wwwlogs/www.xintiaokongjian.com.error.log")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br"),t("span",{staticClass:"line-number"},[s._v("4")]),t("br"),t("span",{staticClass:"line-number"},[s._v("5")]),t("br"),t("span",{staticClass:"line-number"},[s._v("6")]),t("br"),t("span",{staticClass:"line-number"},[s._v("7")]),t("br"),t("span",{staticClass:"line-number"},[s._v("8")]),t("br"),t("span",{staticClass:"line-number"},[s._v("9")]),t("br"),t("span",{staticClass:"line-number"},[s._v("10")]),t("br"),t("span",{staticClass:"line-number"},[s._v("11")]),t("br"),t("span",{staticClass:"line-number"},[s._v("12")]),t("br"),t("span",{staticClass:"line-number"},[s._v("13")]),t("br"),t("span",{staticClass:"line-number"},[s._v("14")]),t("br"),t("span",{staticClass:"line-number"},[s._v("15")]),t("br"),t("span",{staticClass:"line-number"},[s._v("16")]),t("br"),t("span",{staticClass:"line-number"},[s._v("17")]),t("br"),t("span",{staticClass:"line-number"},[s._v("18")]),t("br"),t("span",{staticClass:"line-number"},[s._v("19")]),t("br"),t("span",{staticClass:"line-number"},[s._v("20")]),t("br"),t("span",{staticClass:"line-number"},[s._v("21")]),t("br"),t("span",{staticClass:"line-number"},[s._v("22")]),t("br"),t("span",{staticClass:"line-number"},[s._v("23")]),t("br"),t("span",{staticClass:"line-number"},[s._v("24")]),t("br"),t("span",{staticClass:"line-number"},[s._v("25")]),t("br"),t("span",{staticClass:"line-number"},[s._v("26")]),t("br"),t("span",{staticClass:"line-number"},[s._v("27")]),t("br"),t("span",{staticClass:"line-number"},[s._v("28")]),t("br"),t("span",{staticClass:"line-number"},[s._v("29")]),t("br"),t("span",{staticClass:"line-number"},[s._v("30")]),t("br"),t("span",{staticClass:"line-number"},[s._v("31")]),t("br"),t("span",{staticClass:"line-number"},[s._v("32")]),t("br"),t("span",{staticClass:"line-number"},[s._v("33")]),t("br"),t("span",{staticClass:"line-number"},[s._v("34")]),t("br"),t("span",{staticClass:"line-number"},[s._v("35")]),t("br"),t("span",{staticClass:"line-number"},[s._v("36")]),t("br"),t("span",{staticClass:"line-number"},[s._v("37")]),t("br"),t("span",{staticClass:"line-number"},[s._v("38")]),t("br"),t("span",{staticClass:"line-number"},[s._v("39")]),t("br"),t("span",{staticClass:"line-number"},[s._v("40")]),t("br"),t("span",{staticClass:"line-number"},[s._v("41")]),t("br"),t("span",{staticClass:"line-number"},[s._v("42")]),t("br"),t("span",{staticClass:"line-number"},[s._v("43")]),t("br"),t("span",{staticClass:"line-number"},[s._v("44")]),t("br"),t("span",{staticClass:"line-number"},[s._v("45")]),t("br"),t("span",{staticClass:"line-number"},[s._v("46")]),t("br"),t("span",{staticClass:"line-number"},[s._v("47")]),t("br"),t("span",{staticClass:"line-number"},[s._v("48")]),t("br"),t("span",{staticClass:"line-number"},[s._v("49")]),t("br"),t("span",{staticClass:"line-number"},[s._v("50")]),t("br"),t("span",{staticClass:"line-number"},[s._v("51")]),t("br"),t("span",{staticClass:"line-number"},[s._v("52")]),t("br"),t("span",{staticClass:"line-number"},[s._v("53")]),t("br"),t("span",{staticClass:"line-number"},[s._v("54")]),t("br"),t("span",{staticClass:"line-number"},[s._v("55")]),t("br"),t("span",{staticClass:"line-number"},[s._v("56")]),t("br"),t("span",{staticClass:"line-number"},[s._v("57")]),t("br"),t("span",{staticClass:"line-number"},[s._v("58")]),t("br"),t("span",{staticClass:"line-number"},[s._v("59")]),t("br"),t("span",{staticClass:"line-number"},[s._v("60")]),t("br"),t("span",{staticClass:"line-number"},[s._v("61")]),t("br"),t("span",{staticClass:"line-number"},[s._v("62")]),t("br"),t("span",{staticClass:"line-number"},[s._v("63")]),t("br"),t("span",{staticClass:"line-number"},[s._v("64")]),t("br"),t("span",{staticClass:"line-number"},[s._v("65")]),t("br"),t("span",{staticClass:"line-number"},[s._v("66")]),t("br"),t("span",{staticClass:"line-number"},[s._v("67")]),t("br"),t("span",{staticClass:"line-number"},[s._v("68")]),t("br"),t("span",{staticClass:"line-number"},[s._v("69")]),t("br"),t("span",{staticClass:"line-number"},[s._v("70")]),t("br"),t("span",{staticClass:"line-number"},[s._v("71")]),t("br"),t("span",{staticClass:"line-number"},[s._v("72")]),t("br"),t("span",{staticClass:"line-number"},[s._v("73")]),t("br"),t("span",{staticClass:"line-number"},[s._v("74")]),t("br"),t("span",{staticClass:"line-number"},[s._v("75")]),t("br"),t("span",{staticClass:"line-number"},[s._v("76")]),t("br"),t("span",{staticClass:"line-number"},[s._v("77")]),t("br"),t("span",{staticClass:"line-number"},[s._v("78")]),t("br"),t("span",{staticClass:"line-number"},[s._v("79")]),t("br"),t("span",{staticClass:"line-number"},[s._v("80")]),t("br")])]),t("h4",{attrs:{id:"_4-配置-h5支付页面-h5-xintiaokongjian-com-conf"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_4-配置-h5支付页面-h5-xintiaokongjian-com-conf"}},[s._v("#")]),s._v(" 4 配置 H5支付页面  h5.xintiaokongjian.com.conf")]),s._v(" "),t("div",{staticClass:"language-nginx line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-nginx"}},[t("code",[s._v("\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#     server { ")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# \t\tlisten 80; #监听http的80端口")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# \t\tserver_name h5.xintiaokongjian.com;  # 这是我们设置的域名   ")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# \t\t#access_log  logs/frp.alicbin.log  main ; # 记录日志")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# \t\t access_log  /www/wwwlogs/h5.xintiaokongjian.com.log;# 记录日志")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# \t\tlocation / {")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# \t\t\t\tproxy_pass http://127.0.0.1:10001; # 转发到我们在frps.ini中设置的vhost_http_port端口 用于内网穿透")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# \t\t\t\tproxy_set_header    Host   $host:80;  #不添加这行时访问需要 域名:7001才能访问到内网的机器，如果加了就不再需要后面的端口，直接使用域名访问")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# \t\t\t\tproxy_set_header    X-Real-IP       $remote_addr;")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# \t\t\t\tproxy_set_header    X-Forwarded-For $proxy_add_x_forwarded_for;")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# \t\t\t\tproxy_hide_header   X-Powered-By;")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# \t\t}")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# \t}")]),s._v("\n\n\t"),t("span",{pre:!0,attrs:{class:"token directive"}},[t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("server")])]),s._v("  "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n\t    "),t("span",{pre:!0,attrs:{class:"token directive"}},[t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("listen")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("80")])]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n\t    "),t("span",{pre:!0,attrs:{class:"token directive"}},[t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("server_name")]),s._v(" h5.xintiaokongjian.com")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n\t    \n\t    "),t("span",{pre:!0,attrs:{class:"token directive"}},[t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("index")]),s._v(" index.php index.html index.htm default.php default.htm default.html")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n\t    "),t("span",{pre:!0,attrs:{class:"token directive"}},[t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("root")]),s._v(" /home/java/heart_api/page/h5")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n\t    \n\t    "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br"),t("span",{staticClass:"line-number"},[s._v("4")]),t("br"),t("span",{staticClass:"line-number"},[s._v("5")]),t("br"),t("span",{staticClass:"line-number"},[s._v("6")]),t("br"),t("span",{staticClass:"line-number"},[s._v("7")]),t("br"),t("span",{staticClass:"line-number"},[s._v("8")]),t("br"),t("span",{staticClass:"line-number"},[s._v("9")]),t("br"),t("span",{staticClass:"line-number"},[s._v("10")]),t("br"),t("span",{staticClass:"line-number"},[s._v("11")]),t("br"),t("span",{staticClass:"line-number"},[s._v("12")]),t("br"),t("span",{staticClass:"line-number"},[s._v("13")]),t("br"),t("span",{staticClass:"line-number"},[s._v("14")]),t("br"),t("span",{staticClass:"line-number"},[s._v("15")]),t("br"),t("span",{staticClass:"line-number"},[s._v("16")]),t("br"),t("span",{staticClass:"line-number"},[s._v("17")]),t("br"),t("span",{staticClass:"line-number"},[s._v("18")]),t("br"),t("span",{staticClass:"line-number"},[s._v("19")]),t("br"),t("span",{staticClass:"line-number"},[s._v("20")]),t("br"),t("span",{staticClass:"line-number"},[s._v("21")]),t("br"),t("span",{staticClass:"line-number"},[s._v("22")]),t("br"),t("span",{staticClass:"line-number"},[s._v("23")]),t("br")])]),t("blockquote",[t("h5",{attrs:{id:"作者-洪斌-http-blogs-alicbin-com"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#作者-洪斌-http-blogs-alicbin-com"}},[s._v("#")]),s._v(" 作者：@洪斌 http://blogs.alicbin.com")])])])}),[],!1,null,null,null);a.default=e.exports}}]);